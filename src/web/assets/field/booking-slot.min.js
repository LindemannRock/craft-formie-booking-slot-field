window.FormieBookingSlot=class{constructor(t={}){this.$form=t.$form,this.form=this.$form?this.$form.form:null,this.$field=t.$field,this.settings=t,this.initializeField()}initializeField(){if(!this.$field)return;const t=this.$field.querySelector("[data-fui-booking-slot]");t&&(this.setupDateSelection(t),this.setupSlotSelection(t))}setupDateSelection(t){const e=t.querySelectorAll("[data-date-input]"),s=t.querySelector("[data-booking-slots]");e.forEach(i=>{i.addEventListener("change",o=>{const l=o.target.value;if("radio"===i.type){e.forEach(t=>{const e=t.closest(".fui-date-option");e&&e.classList.remove("is-selected")});const t=o.target.closest(".fui-date-option");t&&t.classList.add("is-selected")}s&&s.classList.remove("is-disabled"),this.updateSlotAvailability(t,l);t.querySelectorAll("[data-slot-input]").forEach(t=>{if("radio"===t.type){t.checked=!1;const e=t.closest(".fui-slot-option");e&&e.classList.remove("is-selected")}else t.selectedIndex=0})})})}setupSlotSelection(t){const e=t.querySelectorAll("[data-slot-input]");e.forEach(t=>{t.addEventListener("change",s=>{if("radio"===t.type&&(e.forEach(t=>{const e=t.closest(".fui-slot-option");e&&e.classList.remove("is-selected")}),s.target.checked)){const t=s.target.closest(".fui-slot-option");t&&t.classList.add("is-selected")}})})}updateSlotAvailability(t,e){if(!this.settings.slotAvailability||!this.settings.slotAvailability[e])return;const s=this.settings.slotAvailability[e],i=t.querySelector("select[data-slot-input]"),o=t.querySelectorAll('input[type="radio"][data-slot-input]');if(i){i.querySelectorAll("option[data-slot-key]").forEach(t=>{const e=t.getAttribute("data-slot-key");if(s[e]){const{remaining:i,isFull:o}=s[e];t.disabled=o,t.setAttribute("data-remaining",i);const l=t.textContent.split(" - ")[0];this.settings.showRemainingCapacity&&(t.textContent=o?`${l} - Fully Booked`:`${l} - ${i} spots left`)}})}else o.length>0&&o.forEach(t=>{const e=t.closest(".fui-slot-option");if(!e)return;const i=e.getAttribute("data-slot-key"),o=e.querySelector(".fui-slot-capacity");if(s[i]){const{remaining:l,isFull:a}=s[i];e.setAttribute("data-remaining",l),a?(e.classList.add("is-full"),t.disabled=!0,t.checked=!1,o&&(o.textContent="Fully Booked",o.classList.add("is-full"))):(e.classList.remove("is-full"),t.disabled=!1,o&&this.settings.showRemainingCapacity&&(o.textContent=`${l} spot(s) left`,o.classList.remove("is-full")))}})}onAfterSubmit(t){}};